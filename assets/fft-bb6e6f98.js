let s;const f=new Array(128).fill(void 0);f.push(void 0,null,!0,!1);function w(e){return f[e]}let p=f.length;function k(e){e<132||(f[e]=p,p=e)}function d(e){const n=w(e);return k(e),n}function b(e){p===f.length&&f.push(f.length+1);const n=p;return p=f[n],f[n]=e,n}const M=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&M.decode();let g=null;function A(){return(g===null||g.byteLength===0)&&(g=new Uint8Array(s.memory.buffer)),g}function O(e,n){return e=e>>>0,M.decode(A().subarray(e,e+n))}function S(e){const n=typeof e;if(n=="number"||n=="boolean"||e==null)return`${e}`;if(n=="string")return`"${e}"`;if(n=="symbol"){const o=e.description;return o==null?"Symbol":`Symbol(${o})`}if(n=="function"){const o=e.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(e)){const o=e.length;let i="[";o>0&&(i+=S(e[0]));for(let c=1;c<o;c++)i+=", "+S(e[c]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(t.length>1)r=t[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}let u=0;const j=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},I=typeof j.encodeInto=="function"?function(e,n){return j.encodeInto(e,n)}:function(e,n){const t=j.encode(e);return n.set(t),{read:e.length,written:t.length}};function T(e,n,t){if(t===void 0){const _=j.encode(e),a=n(_.length,1)>>>0;return A().subarray(a,a+_.length).set(_),u=_.length,a}let r=e.length,o=n(r,1)>>>0;const i=A();let c=0;for(;c<r;c++){const _=e.charCodeAt(c);if(_>127)break;i[o+c]=_}if(c!==r){c!==0&&(e=e.slice(c)),o=t(o,r,r=c+e.length*3,1)>>>0;const _=A().subarray(o+c,o+r),a=I(e,_);c+=a.written}return u=c,o}let y=null;function l(){return(y===null||y.byteLength===0)&&(y=new Int32Array(s.memory.buffer)),y}let m=null;function W(){return(m===null||m.byteLength===0)&&(m=new Float32Array(s.memory.buffer)),m}function h(e,n){const t=n(e.length*4,4)>>>0;return W().set(e,t/4),u=e.length,t}function E(e,n){return e=e>>>0,W().subarray(e/4,e/4+n)}class F{static __wrap(n){n=n>>>0;const t=Object.create(F.prototype);return t.__wbg_ptr=n,t}__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,n}free(){const n=this.__destroy_into_raw();s.__wbg_analysis_free(n)}constructor(){const n=s.analysis_new();return F.__wrap(n)}fft(n,t){const r=h(t,s.__wbindgen_malloc),o=u,i=s.analysis_fft(this.__wbg_ptr,n,r,o);return d(i)}decimate(n,t){try{const c=s.__wbindgen_add_to_stack_pointer(-16),_=h(t,s.__wbindgen_malloc),a=u;s.analysis_decimate(c,this.__wbg_ptr,n,_,a);var r=l()[c/4+0],o=l()[c/4+1],i=E(r,o).slice();return s.__wbindgen_free(r,o*4),i}finally{s.__wbindgen_add_to_stack_pointer(16)}}moving_avg(n,t){try{const c=s.__wbindgen_add_to_stack_pointer(-16),_=h(t,s.__wbindgen_malloc),a=u;s.analysis_moving_avg(c,this.__wbg_ptr,n,_,a);var r=l()[c/4+0],o=l()[c/4+1],i=E(r,o).slice();return s.__wbindgen_free(r,o*4),i}finally{s.__wbindgen_add_to_stack_pointer(16)}}transform(n,t,r){const o=h(r,s.__wbindgen_malloc),i=u,c=s.analysis_transform(this.__wbg_ptr,n,t,o,i);return d(c)}}async function R(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function L(){const e={};return e.wbg={},e.wbg.__wbindgen_object_drop_ref=function(n){d(n)},e.wbg.__wbindgen_object_clone_ref=function(n){const t=w(n);return b(t)},e.wbg.__wbindgen_number_new=function(n){return b(n)},e.wbg.__wbindgen_string_new=function(n,t){const r=O(n,t);return b(r)},e.wbg.__wbg_set_841ac57cff3d672b=function(n,t,r){w(n)[d(t)]=d(r)},e.wbg.__wbg_new_898a68150f225f2e=function(){const n=new Array;return b(n)},e.wbg.__wbg_new_b51585de1b234aff=function(){const n=new Object;return b(n)},e.wbg.__wbg_set_502d29070ea18557=function(n,t,r){w(n)[t>>>0]=d(r)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const n=new Error;return b(n)},e.wbg.__wbg_stack_658279fe44541cf6=function(n,t){const r=w(t).stack,o=T(r,s.__wbindgen_malloc,s.__wbindgen_realloc),i=u;l()[n/4+1]=i,l()[n/4+0]=o},e.wbg.__wbg_error_f851667af71bcfc6=function(n,t){let r,o;try{r=n,o=t,console.error(O(n,t))}finally{s.__wbindgen_free(r,o,1)}},e.wbg.__wbindgen_debug_string=function(n,t){const r=S(w(t)),o=T(r,s.__wbindgen_malloc,s.__wbindgen_realloc),i=u;l()[n/4+1]=i,l()[n/4+0]=o},e.wbg.__wbindgen_throw=function(n,t){throw new Error(O(n,t))},e}function $(e,n){return s=e.exports,x.__wbindgen_wasm_module=n,m=null,y=null,g=null,s}async function x(e){if(s!==void 0)return s;typeof e>"u"&&(e=new URL("/assets/analysis_bg-5115eade.wasm",self.location));const n=L();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:r}=await R(await e,n);return $(t,r)}self.onmessage=async e=>{await x();const n=new F,t=Number(e.data.sampleFrequency),r=e.data.input,o=n.fft(t,r);self.postMessage(o)};
